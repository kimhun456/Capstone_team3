var autoComplete=function(){function t(t){function e(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function n(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)}function r(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n)}function i(t,r,i,o){n(o||document,r,function(n){for(var r,o=n.target||n.srcElement;o&&!(r=e(o,t));)o=o.parentElement;r&&i.call(o,n)})}if(document.querySelector){var o={container:document.body,selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(t,e){e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+e.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+t+'">'+t.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(t,e,n){}};for(var s in t)t.hasOwnProperty(s)&&(o[s]=t[s]);for(var a="object"==typeof o.selector?[o.selector]:document.querySelectorAll(o.selector),u=0;u<a.length;u++){var c=a[u];c.sc=document.createElement("div"),c.sc.className="autocomplete-suggestions "+o.menuClass,c.autocompleteAttr=c.getAttribute("autocomplete"),c.setAttribute("autocomplete","off"),c.cache={},c.last_val="",c.updateSC=function(t,e){c.getBoundingClientRect();if(!t&&(c.sc.style.display="block",c.sc.maxHeight||(c.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(c.sc,null):c.sc.currentStyle).maxHeight)),c.sc.suggestionHeight||(c.sc.suggestionHeight=c.sc.querySelector(".autocomplete-suggestion").offsetHeight),c.sc.suggestionHeight))if(e){var n=c.sc.scrollTop,r=e.getBoundingClientRect().top-c.sc.getBoundingClientRect().top;r+c.sc.suggestionHeight-c.sc.maxHeight>0?c.sc.scrollTop=r+c.sc.suggestionHeight+n-c.sc.maxHeight:0>r&&(c.sc.scrollTop=r+n)}else c.sc.scrollTop=0},n(window,"resize",c.updateSC),o.container.appendChild(c.sc),i("autocomplete-suggestion","mouseleave",function(t){var e=c.sc.querySelector(".autocomplete-suggestion.selected");e&&setTimeout(function(){e.className=e.className.replace("selected","")},20)},c.sc),i("autocomplete-suggestion","mouseover",function(t){var e=c.sc.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace("selected","")),this.className+=" selected"},c.sc),i("autocomplete-suggestion","mousedown",function(t){if(e(this,"autocomplete-suggestion")){var n=this.getAttribute("data-val");c.value=n,o.onSelect(t,n,this),c.sc.style.display="none"}},c.sc),c.blurHandler=function(){try{var t=document.querySelector(".autocomplete-suggestions:hover")}catch(e){var t=0}t?c!==document.activeElement&&setTimeout(function(){c.focus()},20):(c.last_val=c.value,c.sc.style.display="none",setTimeout(function(){c.sc.style.display="none"},350))},n(c,"blur",c.blurHandler);var l=function(t){var e=c.value;if(c.cache[e]=t,t.length&&e.length>=o.minChars){for(var n="",r=0;r<t.length;r++)n+=o.renderItem(t[r],e);c.sc.innerHTML=n,c.updateSC(0)}else c.sc.style.display="none"};c.keydownHandler=function(t){var e=window.event?t.keyCode:t.which;if((40==e||38==e)&&c.sc.innerHTML){var n,r=c.sc.querySelector(".autocomplete-suggestion.selected");return r?(n=40==e?r.nextSibling:r.previousSibling,n?(r.className=r.className.replace("selected",""),n.className+=" selected",c.value=n.getAttribute("data-val")):(r.className=r.className.replace("selected",""),c.value=c.last_val,n=0)):(n=40==e?c.sc.querySelector(".autocomplete-suggestion"):c.sc.childNodes[c.sc.childNodes.length-1],n.className+=" selected",c.value=n.getAttribute("data-val")),c.updateSC(0,n),!1}if(27==e)c.value=c.last_val,c.sc.style.display="none";else if(13==e||9==e){var r=c.sc.querySelector(".autocomplete-suggestion.selected");r&&"none"!=c.sc.style.display&&(o.onSelect(t,r.getAttribute("data-val"),r),setTimeout(function(){c.sc.style.display="none"},20))}},n(c,"keydown",c.keydownHandler),c.keyupHandler=function(t){var e=window.event?t.keyCode:t.which;if(!e||(35>e||e>40)&&13!=e&&27!=e){var n=c.value;if(n.length>=o.minChars){if(n!=c.last_val){if(c.last_val=n,clearTimeout(c.timer),o.cache){if(n in c.cache)return void l(c.cache[n]);for(var r=1;r<n.length-o.minChars;r++){var i=n.slice(0,n.length-r);if(i in c.cache&&!c.cache[i].length)return void l([])}}c.timer=setTimeout(function(){o.source(n,l)},o.delay)}}else c.last_val=n,c.sc.style.display="none"}},n(c,"keyup",c.keyupHandler),c.focusHandler=function(t){c.last_val="\n",c.keyupHandler(t)},o.minChars||n(c,"focus",c.focusHandler)}this.destroy=function(){for(var t=0;t<a.length;t++){var e=a[t];r(window,"resize",e.updateSC),r(e,"blur",e.blurHandler),r(e,"focus",e.focusHandler),r(e,"keydown",e.keydownHandler),r(e,"keyup",e.keyupHandler),e.autocompleteAttr?e.setAttribute("autocomplete",e.autocompleteAttr):e.removeAttribute("autocomplete"),document.body.removeChild(e.sc),e=null}}}}return t}();!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(){var t=new a.HandlebarsEnvironment;return d.extend(t,a),t.SafeString=c["default"],t.Exception=p["default"],t.Utils=d,t.escapeExpression=d.escapeExpression,t.VM=v,t.template=function(e){return v.template(e,t)},t}var i=n(1)["default"],o=n(2)["default"];e.__esModule=!0;var s=n(3),a=i(s),u=n(17),c=o(u),l=n(5),p=o(l),f=n(4),d=i(f),h=n(18),v=i(h),g=n(19),m=o(g),y=r();y.create=r,m["default"](y),y["default"]=y,e["default"]=y,t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,n){"use strict";function r(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},u.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var i=n(2)["default"];e.__esModule=!0,e.HandlebarsEnvironment=r;var o=n(4),s=n(5),a=i(s),u=n(6),c=n(14),l=n(16),p=i(l),f="4.0.5";e.VERSION=f;var d=7;e.COMPILER_REVISION=d;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=h;var v="[object Object]";r.prototype={constructor:r,logger:p["default"],log:p["default"].log,registerHelper:function(t,e){if(o.toString.call(t)===v){if(e)throw new a["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===v)o.extend(this.partials,t);else{if("undefined"==typeof e)throw new a["default"]('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===v){if(e)throw new a["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=p["default"].log;e.log=g,e.createFrame=o.createFrame,e.logger=p["default"]},function(t,e){"use strict";function n(t){return l[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return f.test(t)?t.replace(p,n):t}function s(t){return t||0===t?!(!v(t)||0!==t.length):!0}function a(t){var e=r({},t);return e._parent=t,e}function u(t,e){return t.path=e,t}function c(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=r,e.indexOf=i,e.escapeExpression=o,e.isEmpty=s,e.createFrame=a,e.blockParams=u,e.appendContextPath=c;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=/[&<>"'`=]/g,f=/[&<>"'`=]/,d=Object.prototype.toString;e.toString=d;var h=function(t){return"function"==typeof t};h(/x/)&&(e.isFunction=h=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)}),e.isFunction=h;var v=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1};e.isArray=v},function(t,e){"use strict";function n(t,e){var i=e&&e.loc,o=void 0,s=void 0;i&&(o=i.start.line,s=i.start.column,t+=" - "+o+":"+s);for(var a=Error.prototype.constructor.call(this,t),u=0;u<r.length;u++)this[r[u]]=a[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=o,this.column=s)}e.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){s["default"](t),u["default"](t),l["default"](t),f["default"](t),h["default"](t),g["default"](t),y["default"](t)}var i=n(2)["default"];e.__esModule=!0,e.registerDefaultHelpers=r;var o=n(7),s=i(o),a=n(8),u=i(a),c=n(9),l=i(c),p=n(10),f=i(p),d=n(11),h=i(d),v=n(12),g=i(v),m=n(13),y=i(m)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,o=n.fn;if(e===!0)return o(this);if(e===!1||null==e)return i(this);if(r.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return o(e,n)})},t.exports=e["default"]},function(t,e,n){"use strict";var r=n(2)["default"];e.__esModule=!0;var i=n(4),o=n(5),s=r(o);e["default"]=function(t){t.registerHelper("each",function(t,e){function n(e,n,o){c&&(c.key=e,c.index=n,c.first=0===n,c.last=!!o,l&&(c.contextPath=l+e)),u+=r(t[e],{data:c,blockParams:i.blockParams([t[e],e],[l+e,null])})}if(!e)throw new s["default"]("Must pass iterator to #each");var r=e.fn,o=e.inverse,a=0,u="",c=void 0,l=void 0;if(e.data&&e.ids&&(l=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),i.isFunction(t)&&(t=t.call(this)),e.data&&(c=i.createFrame(e.data)),t&&"object"==typeof t)if(i.isArray(t))for(var p=t.length;p>a;a++)a in t&&n(a,a,a===t.length-1);else{var f=void 0;for(var d in t)t.hasOwnProperty(d)&&(void 0!==f&&n(f,a-1),f=d,a++);void 0!==f&&n(f,a-1,!0)}return 0===a&&(u=o(this)),u})},t.exports=e["default"]},function(t,e,n){"use strict";var r=n(2)["default"];e.__esModule=!0;var i=n(5),o=r(i);e["default"]=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("if",function(t,e){return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),e[0]=i,t.log.apply(t,e)})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&(i=r.createFrame(e.data),i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:i,blockParams:r.blockParams([t],[i&&i.contextPath])})})},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){s["default"](t)}var i=n(2)["default"];e.__esModule=!0,e.registerDefaultDecorators=r;var o=n(15),s=i(o)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);e["default"]=function(t){t.registerDecorator("inline",function(t,e,n,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var s=n.partials;n.partials=r.extend({},s,e.partials);var a=t(i,o);return n.partials=s,a}),e.partials[i.args[0]]=i.fn,o})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];console[e].apply(console,r)}}};e["default"]=i,t.exports=e["default"]},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){var e=t&&t[0]||1,n=m.COMPILER_REVISION;if(e!==n){if(n>e){var r=m.REVISION_CHANGES[n],i=m.REVISION_CHANGES[e];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function i(t,e){function n(n,r,i){i.hash&&(r=h.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,r,i);var o=e.VM.invokePartial.call(this,n,r,i);if(null==o&&e.compile&&(i.partials[i.name]=e.compile(n,t.compilerOptions,e),o=i.partials[i.name](r,i)),null!=o){if(i.indent){for(var s=o.split("\n"),a=0,u=s.length;u>a&&(s[a]||a+1!==u);a++)s[a]=i.indent+s[a];o=s.join("\n")}return o}throw new g["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(e){function n(e){return""+t.main(i,e,i.helpers,i.partials,s,u,a)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o.data;r._setup(o),!o.partial&&t.useData&&(s=c(e,s));var a=void 0,u=t.useBlockParams?[]:void 0;return t.useDepths&&(a=o.depths?e!==o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=l(t.main,n,i,o.depths||[],s,u))(e,o)}if(!e)throw new g["default"]("No environment passed to template");if(!t||!t.main)throw new g["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i={strict:function(t,e){if(!(e in t))throw new g["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,r=0;n>r;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,r,i){var s=this.programs[t],a=this.fn(t);return e||i||r||n?s=o(this,t,a,e,n,r,i):s||(s=this.programs[t]=o(this,t,a)),s},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=h.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=i.merge(n.decorators,e.decorators)))},r._child=function(e,n,r,s){if(t.useBlockParams&&!r)throw new g["default"]("must pass block params");if(t.useDepths&&!s)throw new g["default"]("must pass parent depths");return o(i,e,t[e],n,0,r,s)},r}function o(t,e,n,r,i,o,s){function a(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return s&&e!==s[0]&&(a=[e].concat(s)),n(t,e,t.helpers,t.partials,i.data||r,o&&[i.blockParams].concat(o),a)}return a=l(n,a,t,s,r,o),a.program=e,a.depth=s?s.length:0,a.blockParams=i||0,a}function s(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function a(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==u&&(n.data=m.createFrame(n.data),r=n.data["partial-block"]=n.fn,r.partials&&(n.partials=h.extend({},n.partials,r.partials))),void 0===t&&r&&(t=r),void 0===t)throw new g["default"]("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function u(){return""}function c(t,e){return e&&"root"in e||(e=e?m.createFrame(e):{},e.root=t),e}function l(t,e,n,r,i,o){if(t.decorator){var s={};e=t.decorator(e,s,n,r&&r[0],i,o,r),h.extend(e,s)}return e}var p=n(1)["default"],f=n(2)["default"];e.__esModule=!0,e.checkRevision=r,e.template=i,e.wrapProgram=o,e.resolvePartial=s,e.invokePartial=a,e.noop=u;var d=n(4),h=p(d),v=n(5),g=f(v),m=n(3)},function(t,e){(function(n){"use strict";e.__esModule=!0,e["default"]=function(t){var e="undefined"!=typeof n?n:window,r=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=r),t}},t.exports=e["default"]}).call(e,function(){return this}())}])}),function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var e="undefined"!=typeof window?window:self,n=e.Q;e.Q=t(),e.Q.noConflict=function(){return e.Q=n,this}}}(function(){"use strict";function t(t){return function(){return $.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===nt(t)||t instanceof Q}function r(t,e){if(B&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(rt)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+rt+"\n");t.stack=i(o)}}function i(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];a(i)||o(i)||!i||n.push(i)}return n.join("\n")}function o(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=s(t);if(!e)return!1;var n=e[0],r=e[1];return n===z&&r>=W&&ut>=r}function u(){if(B)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=s(n);if(!r)return;return z=r[0],r[1]}}function c(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof h?t:y(t)?j(t):E(t)}function p(){function t(t){e=t,o.source=t,Z(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=Y(p.prototype),o=Y(h.prototype);if(o.promiseDispatch=function(t,i,o){var s=G(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=g(e);return m(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&B)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(l(n))},i.fulfill=function(n){e||t(E(n))},i.reject=function(n){e||t(C(n))},i.notify=function(t){e||Z(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},i}function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function d(t){return f(function(e,n){for(var r=0,i=t.length;i>r;r++)l(t[r]).then(e,n)})}function h(t,e,n){void 0===e&&(e=function(t){return C(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Y(h.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(a){s=C(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function v(t,e,n,r){return l(t).then(e,n,r)}function g(t){if(m(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function m(t){return t instanceof h}function y(t){return e(t)&&"function"==typeof t.then}function w(t){return m(t)&&"pending"===t.inspect().state}function _(t){return!m(t)||"fulfilled"===t.inspect().state}function x(t){return m(t)&&"rejected"===t.inspect().state}function k(){it.length=0,ot.length=0,at||(at=!0)}function b(t,e){at&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){-1!==J(ot,t)&&(process.emit("unhandledRejection",e,t),st.push(t))}),ot.push(t),e&&"undefined"!=typeof e.stack?it.push(e.stack):it.push("(no stack) "+e))}function T(t){if(at){var e=J(ot,t);-1!==e&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){var n=J(st,t);-1!==n&&(process.emit("rejectionHandled",it[e],t),st.splice(n,1))}),ot.splice(e,1),it.splice(e,1))}}function C(t){var e=h({when:function(e){return e&&T(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return b(e,t),e}function E(t){return h({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return et(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function j(t){var e=p();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function S(t){return h({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return l(t).inspect()})}function H(t,e,n){return l(t).spread(e,n)}function I(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=r[t](e)}catch(a){return C(a)}return s.done?l(s.value):v(s.value,i,o)}try{s=r[t](e)}catch(a){return n(a)?l(a.value):C(a)}return v(s,i,o)}var r=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function N(t){l.done(l.async(t)())}function A(t){throw new Q(t)}function P(t){return function(){return H([this,M(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return l(t).dispatch(e,n)}function M(t){return v(t,function(t){var e=0,n=p();return Z(t,function(r,i,o){var s;m(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,v(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function R(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return Z(t,function(r,i,o){function s(t){e.resolve(t)}function a(t){n--,0===n&&(t.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+t.message,e.reject(t))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,v(c,s,a,u)},void 0),e.promise}function O(t){return v(t,function(t){return t=X(t,l),v(M(X(t,function(t){return v(t,K,K)})),function(){return t})})}function D(t){return l(t).allSettled()}function F(t,e){return l(t).then(void 0,void 0,e)}function V(t,e){return l(t).nodeify(e)}var B=!1;try{throw new Error}catch(q){B=!!q.stack}var z,Q,W=u(),K=function(){},U=function(){function t(){for(var t,r;n.next;)n=n.next,t=n.task,n.task=void 0,r=n.domain,r&&(n.domain=void 0,r.enter()),e(t,r);for(;a.length;)t=a.pop(),e(t);i=!1}function e(e,n){try{e()}catch(r){if(s)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var n={task:void 0,next:null},r=n,i=!1,o=void 0,s=!1,a=[];if(U=function(t){r=r.next={task:t,domain:s&&process.domain,next:null},i||(i=!0,o())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=c,u.port1.onmessage=t,t()};var c=function(){u.port2.postMessage(0)};o=function(){setTimeout(t,0),c()}}else o=function(){setTimeout(t,0)};return U.runAfter=function(t){a.push(t),i||(i=!0,o())},U}(),$=Function.call,G=t(Array.prototype.slice),Z=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),J=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),X=t(Array.prototype.map||function(t,e){var n=this,r=[];return Z(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),Y=Object.create||function(t){function e(){}return e.prototype=t,new e},tt=t(Object.prototype.hasOwnProperty),et=Object.keys||function(t){var e=[];for(var n in t)tt(t,n)&&e.push(n);return e},nt=t(Object.prototype.toString);Q="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var rt="From previous event:";l.resolve=l,l.nextTick=U,l.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(G(arguments,1)):t.resolve(n)}},l.Promise=f,l.promise=f,f.race=d,f.all=M,f.reject=C,f.resolve=l,l.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},h.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},l.race=d,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,e,n){function i(e){try{return"function"==typeof t?t(e):e}catch(n){return C(n)}}function o(t){if("function"==typeof e){r(t,a);try{return e(t)}catch(n){return C(n)}}return C(t)}function s(t){return"function"==typeof n?n(t):t}var a=this,u=p(),c=!1;return l.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,u.resolve(i(t)))},"when",[function(t){c||(c=!0,u.resolve(o(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||u.notify(e)}]),u.promise},l.tap=function(t,e){return l(t).tap(e)},h.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=v,h.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=g,l.isPromise=m,l.isPromiseAlike=y,l.isPending=w,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=_,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=x,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],ot=[],st=[],at=!0;l.resetUnhandledRejections=k,l.getUnhandledReasons=function(){return it.slice()},l.stopUnhandledRejectionTracking=function(){k(),at=!1},k(),l.reject=C,l.fulfill=E,l.master=S,l.spread=H,h.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=I,l.spawn=N,l["return"]=A,l.promised=P,l.dispatch=L,h.prototype.dispatch=function(t,e){var n=this,r=p();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},h.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},h.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},h.prototype.del=h.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},h.prototype.mapply=h.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,G(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,G(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,G(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,G(arguments)])},l.fbind=function(t){var e=l(t),n=G(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(G(arguments))])}},h.prototype.fbind=function(){var t=this,e=G(arguments);return function(){return t.dispatch("apply",[this,e.concat(G(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=M,h.prototype.all=function(){return M(this)},l.any=R,h.prototype.any=function(){return R(this)},l.allResolved=c(O,"allResolved","allSettled"),h.prototype.allResolved=function(){return O(this)},l.allSettled=D,h.prototype.allSettled=function(){return this.then(function(t){return M(X(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},h.prototype.fail=h.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=F,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},h.prototype.fin=h.prototype["finally"]=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},h.prototype.done=function(t,e,n){var i=function(t){l.nextTick(function(){if(r(t,o),!l.onerror)throw t;l.onerror(t)})},o=t||e||n?this.then(t,e,n):this;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i)),o.then(void 0,i)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},h.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},h.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){
n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},h.prototype.nfapply=function(t){var e=p(),n=G(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=G(arguments,1);return l(t).nfapply(e)},h.prototype.nfcall=function(){var t=G(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=G(arguments,1);return function(){var n=e.concat(G(arguments)),r=p();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=G(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=G(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(G(arguments)),o=p();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},h.prototype.nbind=function(){var t=G(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},h.prototype.nmapply=h.prototype.npost=function(t,e){var n=G(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=G(arguments,2),r=p();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var e=G(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=V,h.prototype.nodeify=function(t){return t?void this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ut=u();return l}),function(t,e){"use strict";function n(){for(var t=arguments[0],e=1,n=arguments.length;n>e;e++){var r=arguments[e];for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function i(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function o(t){return t.replace(/^\s+|\s+$/g,"")}function s(e,n){t.attachEvent&&!t.addEventListener?e.innerText=n:e.textContent=n}var a=function(){},u={additionalTagClasses:"",allowDuplicates:!1,saveOnBlur:!1,duplicateTagClass:"",containerFocusClass:"active",focusInputOnContainerClick:!0,hiddenInputName:"taggles[]",tags:[],allowedTags:[],disallowedTags:[],maxTags:null,tabIndex:1,placeholder:"Enter tags...",submitKeys:[],preserveCase:!1,tagFormatter:a,onBeforeTagAdd:a,onTagAdd:a,onBeforeTagRemove:a,onTagRemove:a},c=8,l=188,p=9,f=13,d=function(t,r){this.settings=n({},u,r),this.measurements={container:{rect:null,style:null,padding:null}},this.container=t,this.tag={values:[],elements:[]},this.list=e.createElement("ul"),this.inputLi=e.createElement("li"),this.input=e.createElement("input"),this.sizer=e.createElement("div"),this.pasting=!1,this.placeholder=null,this.settings.placeholder&&(this.placeholder=e.createElement("span")),this.settings.submitKeys.length||(this.settings.submitKeys=[l,p,f]),"string"==typeof t&&(this.container=e.getElementById(t)),this._getMeasurements(),this._setupTextarea(),this._attachEvents()};d.prototype._getMeasurements=function(){var e,n,r;this.measurements.container.rect=this.container.getBoundingClientRect(),this.measurements.container.style=t.getComputedStyle(this.container),e=this.measurements.container.style,n=parseInt(e["padding-left"]||e.paddingLeft,10),r=parseInt(e["padding-right"]||e.paddingRight,10),this.measurements.container.padding=n+r},d.prototype._setupTextarea=function(){var e;if(this.list.className="taggle_list",this.input.type="text",this.input.className="taggle_input",this.input.tabIndex=this.settings.tabIndex,this.sizer.className="taggle_sizer",this.settings.tags.length)for(var n=0,r=this.settings.tags.length;r>n;n++){var i=this._createTag(this.settings.tags[n]);this.list.appendChild(i)}this.placeholder&&(this.placeholder.style.opacity=0,this.placeholder.classList.add("taggle_placeholder"),this.container.appendChild(this.placeholder),s(this.placeholder,this.settings.placeholder),this.settings.tags.length||(this.placeholder.style.opacity=1)),this.inputLi.appendChild(this.input),this.list.appendChild(this.inputLi),this.container.appendChild(this.list),this.container.appendChild(this.sizer),e=t.getComputedStyle(this.input).fontSize,this.sizer.style.fontSize=e},d.prototype._attachEvents=function(){var t=this;this.settings.focusInputOnContainerClick&&i(this.container,"click",function(){t.input.focus()}),i(this.input,"focus",this._focusInput.bind(this)),i(this.input,"blur",this._blurEvent.bind(this)),i(this.input,"keydown",this._keydownEvents.bind(this)),i(this.input,"keyup",this._keyupEvents.bind(this))},d.prototype._fixInputWidth=function(){var t,e,n,r,i,o=35;this._setInputWidth(),e=this.input.getBoundingClientRect(),n=this.measurements.container.rect,t=~~n.width,t||(t=~~n.right-~~n.left),r=~~e.left-~~n.left,i=this.measurements.container.padding,this._setInputWidth(t-r-i-o)},d.prototype._canAdd=function(t,e){if(!e)return!1;var n=this.settings.maxTags;if(null!==n&&n<=this.getTagValues().length)return!1;if(this.settings.onBeforeTagAdd(t,e)===!1)return!1;if(!this.settings.allowDuplicates&&this._hasDupes(e))return!1;var r=this.settings.preserveCase,i=this.settings.allowedTags;if(i.length&&!this._tagIsInArray(e,i,r))return!1;var o=this.settings.disallowedTags;return!o.length||!this._tagIsInArray(e,o,r)},d.prototype._tagIsInArray=function(t,e,n){if(n)return-1!==e.indexOf(t);var r=[].slice.apply(e).map(function(t){return t.toLowerCase()});return-1!==r.indexOf(t)},d.prototype._add=function(t,e){var n=this,r=e||"";"string"!=typeof e&&(r=o(this.input.value)),r.split(",").map(function(t){return n._formatTag(t)}).forEach(function(e){if(n._canAdd(t,e)){var r=n._createTag(e),i=n.list.children,o=i[i.length-1];n.list.insertBefore(r,o),n.settings.onTagAdd(t,e),n.input.value="",n._setInputWidth(),n._fixInputWidth(),n._focusInput()}})},d.prototype._checkLastTag=function(e){e=e||t.event;var n=this.container.querySelectorAll(".taggle"),r=n[n.length-1],i="taggle_hot",o=this.input.classList.contains("taggle_back");""!==this.input.value||e.keyCode!==c||o?r.classList.contains(i)&&r.classList.remove(i):r.classList.contains(i)?(this.input.classList.add("taggle_back"),this._remove(r,e),this._fixInputWidth(),this._focusInput()):r.classList.add(i)},d.prototype._setInputWidth=function(t){this.input.style.width=(t||10)+"px"},d.prototype._hasDupes=function(t){var e,n=this.tag.values.indexOf(t),r=this.container.querySelector(".taggle_list");if(this.settings.duplicateTagClass){e=r.querySelectorAll("."+this.settings.duplicateTagClass);for(var i=0,o=e.length;o>i;i++)e[i].classList.remove(this.settings.duplicateTagClass)}return n>-1?(this.settings.duplicateTagClass&&r.childNodes[n].classList.add(this.settings.duplicateTagClass),!0):!1},d.prototype._isConfirmKey=function(t){var e=!1;return this.settings.submitKeys.indexOf(t)>-1&&(e=!0),e},d.prototype._focusInput=function(){this._fixInputWidth(),this.container.classList.contains(this.settings.containerFocusClass)||this.container.classList.add(this.settings.containerFocusClass),this.placeholder&&(this.placeholder.style.opacity=0)},d.prototype._blurEvent=function(e){if(this.container.classList.contains(this.settings.containerFocusClass)&&this.container.classList.remove(this.settings.containerFocusClass),!this.tag.values.length&&this.placeholder&&(this.placeholder.style.opacity=1),this.settings.saveOnBlur){if(e=e||t.event,this._listenForEndOfContainer(),""!==this.input.value)return void this._confirmValidTagEvent(e);this.tag.values.length&&this._checkLastTag(e)}else this.input.value="",this._setInputWidth()},d.prototype._keydownEvents=function(e){e=e||t.event;var n=e.keyCode;return this.pasting=!1,this._listenForEndOfContainer(),86===n&&e.metaKey&&(this.pasting=!0),8!==n&&46!==n||this._deleteHot(e),this._isConfirmKey(n)&&""!==this.input.value?void this._confirmValidTagEvent(e):void(this.tag.values.length&&this._checkLastTag(e))},d.prototype._keyupEvents=function(e){e=e||t.event,this.input.classList.remove("taggle_back"),s(this.sizer,this.input.value),this.pasting&&""!==this.input.value&&(this._add(e),this.pasting=!1)},d.prototype._confirmValidTagEvent=function(e){e=e||t.event,e.preventDefault?e.preventDefault():e.returnValue=!1,this._add(e)},d.prototype._listenForEndOfContainer=function(){var t=this.sizer.getBoundingClientRect().width,e=this.measurements.container.rect.width-this.measurements.container.padding,n=parseInt(this.sizer.style.fontSize,10);t+1.5*n>parseInt(this.input.style.width,10)&&(this.input.style.width=e+"px")},d.prototype._createTag=function(t){var n=e.createElement("li"),r=e.createElement("button"),o=e.createElement("input"),a=e.createElement("span");t=this._formatTag(t),r.innerHTML="&times;",r.className="close",i(r,"click",this._remove.bind(this,r)),i(n,"click",this._makeHot.bind(this,n)),s(a,t),a.className="taggle_text",n.className="taggle "+this.settings.additionalTagClasses,o.type="hidden",o.value=t,o.name=this.settings.hiddenInputName,n.appendChild(a),n.appendChild(r),n.appendChild(o);var u=this.settings.tagFormatter(n);if("undefined"!=typeof u&&(n=u),!(n instanceof HTMLElement)||"LI"!==n.tagName)throw new Error("tagFormatter must return an li element");return this.tag.values.push(t),this.tag.elements.push(n),n},d.prototype._makeHot=function(t,e){if(t){var n="taggle_hot",r=t.parentNode.querySelectorAll("li");Array.prototype.forEach.call(r,function(t){t.classList.remove(n)}),t.classList.add(n)}},d.prototype._deleteHot=function(n){n=n||t.event;var r=e.querySelector(".taggle_hot");console.log(r),r&&this._remove(r,n)},d.prototype._remove=function(t,e){var n,r,i,o;"li"!==t.tagName.toLowerCase()&&(t=t.parentNode),n=t.querySelector(".taggle_text"),r=n.innerText||n.textContent,this.settings.onBeforeTagRemove(e,r)!==!1&&(t.parentNode.removeChild(t),i="a"===t.tagName.toLowerCase()?t.parentNode:t,o=this.tag.elements.indexOf(i),this.tag.elements.splice(o,1),this.tag.values.splice(o,1),this.settings.onTagRemove(e,r),this._focusInput())},d.prototype._formatTag=function(t){return this.settings.preserveCase?t:t.toLowerCase()},d.prototype.getTags=function(){return{elements:this.getTagElements(),values:this.getTagValues()}},d.prototype.getTagElements=function(){return this.tag.elements},d.prototype.getTagValues=function(){return[].slice.apply(this.tag.values)},d.prototype.getInput=function(){return this.input},d.prototype.getContainer=function(){return this.container},d.prototype.add=function(t){var e=r(t);if(e)for(var n=0,i=t.length;i>n;n++)"string"==typeof t[n]&&this._add(null,t[n]);else this._add(null,t);return this},d.prototype.remove=function(t,e){for(var n=this.tag.values.length-1,r=!1;n>-1&&(this.tag.values[n]===t&&(r=!0,this._remove(this.tag.elements[n])),!r||e);)n--;return this},d.prototype.removeAll=function(){for(var t=this.tag.values.length-1;t>=0;t--)this._remove(this.tag.elements[t]);return this},"function"==typeof define&&define.amd?define([],function(){return d}):"object"==typeof exports?module.exports=d:t.Taggle=d}(window,document);